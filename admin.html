<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì œí’ˆ ê´€ë¦¬ í™”ë©´</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* ê´€ë¦¬ì í˜ì´ì§€ ì „ìš© ìŠ¤íƒ€ì¼ */
        #admin-container { padding: 20px; max-width: 600px; margin: 0 auto; }
        #admin-container h2 { border-bottom: 2px solid #cc0066; padding-bottom: 10px; margin-bottom: 20px; }
        .product-form div { margin-bottom: 15px; }
        .product-form label { display: block; font-weight: bold; margin-bottom: 5px; color: #333; }
        .product-form input[type="text"], .product-form textarea, .product-form input[type="number"] {
            width: 100%; padding: 10px; border: 1px solid #ddd; box-sizing: border-box; border-radius: 4px;
        }
        .product-form input[type="file"] { padding: 5px 0; }
        .product-form button { padding: 10px 20px; background-color: #cc0066; color: white; border: none; cursor: pointer; border-radius: 4px; }

        /* ì œí’ˆ ëª©ë¡ ìŠ¤íƒ€ì¼ */
        #product-list-admin { list-style: none; padding: 0; }
        #product-list-admin li { background: #fff; padding: 15px; border: 1px solid #eee; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
        #product-list-admin .actions button { margin-left: 10px; background-color: #555; }
    </style>
</head>
<body>

    <div id="admin-container">
        <h2>ğŸ›ï¸ ì œí’ˆ ë“±ë¡ ë° ìˆ˜ì •</h2>

        <form id="product-upload-form" class="product-form">
            <h3>ìƒˆ ì œí’ˆ ë“±ë¡</h3>
            <div>
                <label for="video-file">ë™ì˜ìƒ ì—…ë¡œë“œ</label>
                <input type="file" id="video-file" accept="video/*" required>
            </div>
            <div>
                <label for="product-name">ì œí’ˆ ì„¤ëª… (ì´ë¦„)</label>
                <input type="text" id="product-name" placeholder="í™€ì¹˜ë°ì´ ì´ ì°¹ì°¹ì§¸ ì´ì§€..." required>
            </div>
            <div>
                <label for="price">ê°€ê²© (ì›)</label>
                <input type="number" id="price" placeholder="98000" min="0" required>
            </div>
            <div>
                <label for="sale-rate">í• ì¸ìœ¨ (%)</label>
                <input type="number" id="sale-rate" placeholder="1" min="0" max="100">
            </div>
            <button type="submit">ì œí’ˆ ë“±ë¡/ìˆ˜ì •</button>
        </form>

        <hr style="margin: 30px 0;">

        <h2>ğŸ“œ ë“±ë¡ëœ ì œí’ˆ ëª©ë¡</h2>
        <ul id="product-list-admin">
            <li>
                <span>[P001] í™€ì¹˜ë°ì´ í€¼ëª¨ì¬íŠ¸ (98,000ì›)</span>
                <div class="actions">
                    <button onclick="editProduct('P001')">ìˆ˜ì •</button>
                    <button onclick="deleteProduct('P001')">ì‚­ì œ</button>
                </div>
            </li>
            <li>
                <span>[P002] 570ì•” ë°‘ì‹±ì´ˆ (98,000ì›)</span>
                <div class="actions">
                    <button onclick="editProduct('P002')">ìˆ˜ì •</button>
                    <button onclick="deleteProduct('P002')">ì‚­ì œ</button>
                </div>
            </li>
        </ul>
    </div>

    <script>
        document.getElementById('product-upload-form').addEventListener('submit', function(e) {
            e.preventDefault();

            // 1. í¼ ë°ì´í„° ìˆ˜ì§‘
            const videoFile = document.getElementById('video-file').files[0];
            const name = document.getElementById('product-name').value;
            const price = document.getElementById('price').value;
            const saleRate = document.getElementById('sale-rate').value || 0;

            if (!videoFile) {
                alert("ë™ì˜ìƒ íŒŒì¼ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.");
                return;
            }

            // ğŸ’¡ ì£¼ì˜: ì´ ì½”ë“œëŠ” í´ë¼ì´ì–¸íŠ¸(ë¸Œë¼ìš°ì €)ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.
            // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì´ ë°ì´í„°ë¥¼ **AJAX(Fetch API)**ë¥¼ í†µí•´ ì„œë²„ë¡œ ì „ì†¡í•´ì•¼ í•©ë‹ˆë‹¤.
            
            // 2. ì„œë²„ í†µì‹  (ì˜ˆì‹œ)
            console.log(`[ì œí’ˆ ë°ì´í„° ì „ì†¡ ì¤€ë¹„] ì´ë¦„: ${name}, ê°€ê²©: ${price}, í• ì¸ìœ¨: ${saleRate}, íŒŒì¼ëª…: ${videoFile.name}`);

            // FormData ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ íŒŒì¼ì„ í¬í•¨í•œ ë°ì´í„°ë¥¼ ì„œë²„ë¡œ ë³´ëƒ…ë‹ˆë‹¤.
            /*
            const formData = new FormData();
            formData.append('video', videoFile);
            formData.append('name', name);
            formData.append('price', price);
            formData.append('saleRate', saleRate);
            
            fetch('/api/products/upload', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                alert('ì œí’ˆì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
                // ì„±ê³µ í›„ í¼ ì´ˆê¸°í™” ë° ëª©ë¡ ìƒˆë¡œê³ ì¹¨
                e.target.reset();
                // refreshProductList();
            })
            .catch(error => {
                alert('ì œí’ˆ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            });
            */
            alert(`[ë°ëª¨] ì œí’ˆ ë“±ë¡/ìˆ˜ì • ìš”ì²­ ì™„ë£Œ. ì‹¤ì œ ì„œë²„ ì „ì†¡ ë¡œì§ì´ í•„ìš”í•©ë‹ˆë‹¤.`);
        });

        // ì œí’ˆ ìˆ˜ì • ë²„íŠ¼ í´ë¦­ ì‹œ ë™ì‘ (ì‹¤ì œ êµ¬í˜„ ì‹œ ì œí’ˆ ì •ë³´ë¥¼ í¼ì— ë¡œë“œí•´ì•¼ í•¨)
        function editProduct(productId) {
            alert(`${productId} ì œí’ˆì˜ ìˆ˜ì • ëª¨ë“œë¥¼ í™œì„±í™”í•©ë‹ˆë‹¤. (DBì—ì„œ ì •ë³´ ë¡œë“œ í•„ìš”)`);
            // ì—¬ê¸°ì— DBì—ì„œ í•´ë‹¹ ì œí’ˆ ì •ë³´ë¥¼ ê°€ì ¸ì™€ì„œ í¼ì— ì±„ìš°ëŠ” ë¡œì§ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
        }

        // ì œí’ˆ ì‚­ì œ ë²„íŠ¼ í´ë¦­ ì‹œ ë™ì‘
        function deleteProduct(productId) {
            if (confirm(`${productId} ì œí’ˆì„ ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                // ì—¬ê¸°ì— ì„œë²„ì— ì‚­ì œ ìš”ì²­ì„ ë³´ë‚´ëŠ” ë¡œì§ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
                alert(`[ë°ëª¨] ${productId} ì œí’ˆ ì‚­ì œ ìš”ì²­ ì™„ë£Œ. ì‹¤ì œ ì„œë²„ ì‚­ì œ ë¡œì§ í•„ìš”.`);
                // ì„±ê³µ ì‹œ ëª©ë¡ì—ì„œ ì œê±°
            }
        }
    </script>
</body>
</html>
